# üí≥ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ø–ª–∞—Ç–µ–∂–µ–π YooKassa

## üö® –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

–°–∏—Å—Ç–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π –≤ –±–æ—Ç–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ **—Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ** —Å –∑–∞–≥–ª—É—à–∫–∞–º–∏. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç —Å–æ–≤–µ—Ä—à–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏ –ø–æ–¥–ø–∏—Å–æ–∫.

## üîß –†–µ—à–µ–Ω–∏–µ

–î–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –ÆKassa

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [yookassa.ru](https://yookassa.ru)
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∫–∞–∫ –ø—Ä–æ–¥–∞–≤–µ—Ü
3. –ü—Ä–æ–π–¥–∏—Ç–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π)
4. –ü–æ–ª—É—á–∏—Ç–µ —Å—Ç–∞—Ç—É—Å "–ê–∫—Ç–∏–≤–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω"

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

–í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –ÆKassa:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"** ‚Üí **"API –∏ Webhooks"**
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - **Shop ID** (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–∞–≥–∞–∑–∏–Ω–∞)
   - **Secret Key** (—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á)

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–î–ª—è Railway (–ø—Ä–æ–¥–∞–∫—à–µ–Ω):**

1. –û—Ç–∫—Ä–æ–π—Ç–µ Railway dashboard ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É **"Variables"**
3. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
   ```bash
   YOOKASSA_SHOP_ID=–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_shop_id
   YOOKASSA_SECRET_KEY=–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_secret_key
   ```

**–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –°–æ–∑–¥–∞–Ω–∏–µ `.env` —Ñ–∞–π–ª–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook'–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π:

1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ÆKassa –¥–æ–±–∞–≤—å—Ç–µ Webhook URL:
   ```
   https://–≤–∞—à-–¥–æ–º–µ–Ω.com/webhook/yookassa
   ```

2. –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±—ã—Ç–∏—è:
   - `payment.succeeded` - —É—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞
   - `payment.canceled` - –æ—Ç–º–µ–Ω–µ–Ω–Ω–∞—è –æ–ø–ª–∞—Ç–∞

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–õ–æ–∫–∞–ª—å–Ω–æ (—Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏):**
```bash
python3 -c "
from payment_yookassa import create_payment_link
try:
    url = create_payment_link(123456, 100, 'Test payment')
    print(f'‚úÖ –¢–µ—Å—Ç–æ–≤–∞—è —Å—Å—ã–ª–∫–∞: {url}')
except Exception as e:
    print(f'‚ùå –û—à–∏–±–∫–∞: {e}')
"
```

**–ù–∞ Railway (–ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π):**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —á–µ—Ä–µ–∑ –±–æ—Ç–∞ –≤ Telegram
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∫—É–ø–∏—Ç—å —Ç–∞—Ä–∏—Ñ - –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è —Ä–µ–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É

### 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª—é—á–µ–π –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:

```bash
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ systemd
sudo systemctl restart babka-bot

# –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å
python3 main.py
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"–¢–∞—Ä–∏—Ñ—ã"**
3. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π —Ç–∞—Ä–∏—Ñ
4. –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è **—Ä–µ–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É** –≤–º–µ—Å—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

- **Email**: antonkudo.ai@gmail.com
- **Telegram**: @antonkudo

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–û**: 
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ API –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –∫–æ–¥–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–ª–∞—Ç–µ–∂–µ–π –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –ÆKassa
2. –í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –ø–ª–∞—Ç–µ–∂–∞—Ö
3. –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ª–æ–≥–∏ –±–æ—Ç–∞ –Ω–∞ –æ—à–∏–±–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π

---

**–°—Ç–∞—Ç—É—Å**: ‚ùå –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üî• –í—ã—Å–æ–∫–∏–π  
**–í—Ä–µ–º—è –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫—É**: ~2-3 —á–∞—Å–∞ (–≤–∫–ª—é—á–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é)
