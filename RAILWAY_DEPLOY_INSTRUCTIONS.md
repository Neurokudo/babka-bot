# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –≤ Railway

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. **Legacy shim –∏—Å–ø—Ä–∞–≤–ª–µ–Ω** - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `@router.callback_query` –≤–º–µ—Å—Ç–æ `@dp.callback_query`
2. **–î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - `‚ö° LEGACY SHIM ACTIVATED` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
3. **–°–æ–∑–¥–∞–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã** –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –≤ PostgreSQL Railway

## üîß –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å –≤ Railway PostgreSQL

–ó–∞–π–¥–∏—Ç–µ –≤ **Railway ‚Üí –≤–∞—à —Å–µ—Ä–≤–∏—Å ‚Üí Shell** –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
python scripts/set_balance_postgres.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üîß Connecting to PostgreSQL: postgresql://...
üí∞ Current balance: 1625
‚úÖ Balance updated: old=1625, new=100
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ–ø–ª–æ–π

–í —Ç–æ–º –∂–µ Shell –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
python scripts/deploy_check.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ DATABASE_URL found: postgresql://...
‚úÖ Connected to DB, user 5015100177 balance: 100
‚úÖ Pricing service working, 3 tariffs available
‚úÖ Plans text generated, length: 1143 chars
‚úÖ All checks passed!
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –∫–Ω–æ–ø–∫–∏ "–¢–∞—Ä–∏—Ñ—ã"

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞:

1. **–ü—Ä–æ—Ñ–∏–ª—å** ‚Üí –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å "üí∞ –ú–æ–Ω–µ—Ç: 100"
2. **–¢–∞—Ä–∏—Ñ—ã** ‚Üí –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
3. **–í –ª–æ–≥–∞—Ö Railway** –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è: `‚ö° LEGACY SHIM ACTIVATED for show_tariffs`

## üîç –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ü—Ä–æ–≤–µ—Ä–∫–∞ | –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç |
|----------|-------------------|
| –ü—Ä–æ—Ñ–∏–ª—å / –ë–∞–ª–∞–Ω—Å | üí∞ –ú–æ–Ω–µ—Ç: 100 |
| –¢–∞—Ä–∏—Ñ—ã | –†–∞–±–æ—Ç–∞–µ—Ç, –±–µ–∑ –æ—à–∏–±–æ–∫ |
| –õ–æ–≥–∏ Railway | ‚ö° LEGACY SHIM ACTIVATED for show_tariffs |
| –ü–æ–ø–æ–ª–Ω–∏—Ç—å –º–æ–Ω–µ—Ç—ã | –†–∞–±–æ—Ç–∞–µ—Ç |
| –§–æ—Ç–æ-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã | –ë–∞–ª–∞–Ω—Å —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –Ω–∞ 1 |

## üêõ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

- ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞**: Legacy shim –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª (`@dp.callback_query` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- ‚úÖ **–†–µ—à–µ–Ω–∏–µ**: –ó–∞–º–µ–Ω–µ–Ω –Ω–∞ `@router.callback_query`
- ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞**: –ë–∞–ª–∞–Ω—Å 1625 –≤–º–µ—Å—Ç–æ 100
- ‚úÖ **–†–µ—à–µ–Ω–∏–µ**: –°–∫—Ä–∏–ø—Ç `set_balance_postgres.py` –¥–ª—è PostgreSQL Railway

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

1. **Legacy shim** —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `router` –≤–º–µ—Å—Ç–æ `dp`
2. **–°–∫—Ä–∏–ø—Ç –±–∞–ª–∞–Ω—Å–∞** —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é —Å PostgreSQL —á–µ—Ä–µ–∑ `psycopg2`
3. **–ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–∫—Ä–∏–ø—Ç** —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –≤ git –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π! üéâ
